<?php
// $Id$

function story_node($field) {
  $info = array("name" => "story");

  return $info[$field];
}

function story_access($op, $node) {

  if ($op == "view") {
    return $node->nid && $node->status && !$node->moderate;
  }

  if ($op == "create") {
    return 1;
  }

  if ($op == "update") {
    return user_access("administer nodes");
  }

  if ($op == "delete") {
    return user_access("adminster nodes");
  }

}

function story_help() {
 ?>
/*
  // TODO: update documentation, outdated

  <p>Queued stories: user-contributed stories are automatically whisked away to a submission queue for moderators (i.e. registered user) to frown at.  Moderators vote whether or not a story should be posted to the front page for discussion.</p>
  <p>Posted stories: published stories accessible to all visitors.</p>
  <p>Dumped stories: rejected stories that are no longer available to visitors.</p>
*/
 <?php
}

function story_form($node) {

  $output = form_textarea(t("Body"), "body", $node->body, 60, 15, t("Allowed HTML tags") .": ". htmlspecialchars(variable_get("allowed_html", "")));

  return $output;
}

function story_save($node) {

  if ($node->nid) {
    return array();
  }
  else {
    return array("promote" => 1, "moderate" => 1);
  }

}

?>
